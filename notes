build an app in Python which can be used to generate board setups for battleships game
The app should have gui which will allow interactive placement of available ships on a flat square board and saving the final setup to the database
Game rules:
- square board of 6x6 size
- ships to be placed are: 1x 3-segment ship and 2x 2-segment ship
- ships can be placed horizontally or vertically (not diagnal)
- ships cannot touch each other, at least 1 field spacing must be left (including diagonal fields)
- ships can touch board's edge
- ships must be placed with all their segments within the board

The app gui shall have following components:
- interactive board of 6x6 size
- next to the board there shall be blocks representing the ships of certain lenghts, which can be drag-and-dropped on the board in desired location
- a button named "Save and reset", inactive by default

App functionality:
- fields on which the ship is to be placed (on which they are dragged by user) shall get highlighted dynamically. Green highlight for correct placement, red for incorrect (against game rules)
- on right click on the ship it is rotated 90deg clockwise
- if ship is dropped while having illegal placement (red highlight), it returns to its origin outside board and the user must drag-and-drop it again
- After all ships are placed correctly, the "Save and reset" activates and becomec clickable by user. When it's clicked, the generated board state is saved into a database (explained later), then the board is reset. Ships go back to their origin location outside board, the button becomes inactive, whole procedure repeats

Saving to database:
- the generated board setup should be described by a string of 36chars, each representing one field state, starting from top left field. If a field is empty, it becomes "0". If it contains 3-segment ship, it's "3". If 2-segment ship, it's "2". The data is stored in a csv file named "generated_boards_36_chars.csv" existing in the work directory. When the "36chars_code" is generated, it gets added to the csv as last line and the csv is saved.

Overall it works ok, but there are following issues to correct:
- the field to be highlighted shall not be dependent on the location of the cursor itself, but on the location of dragged ship segments. If the field area is more than 50% covered by draggable ship, it should be the one to highlight
- the ships often land in different fields than highlighted ones
- if certain ship is already placed, it is impossible to adjust its position by dragging it again onto the neighbouring fields, as it detects rule violation (upon clicking and draggin a ship, it should be removed from currently saved board state to prevent this bug)

One more bug - if the ship is rotated while repositioning, it causes the rule violation again.

The reposition with rotation bug stil persists. For some reason, only fields located left to the original location of ship (in case of original horizontal placement) cause rule violation. Similarily, with original vertical placement, only fields above original location cause violation

Fix the temporary markers when saving the board to the csv





I wrote code which calculates some custom metrics for a set of generated board setups and compares them with another set, seeking for statistically relevant bias. I want to validate it with some examples. Please generate two sets of 1000 board setups, one perfectly random, the other with some local bias (for example regarding clustering). Do not tell me what the bias until I validate it myself. The ship placement rules are:
- square board of 6x6 size
- ships to be placed are: 1x 3-segment ship and 2x 2-segment ship
- ships can be placed horizontally or vertically (not diagnal)
- ships cannot touch each other, at least 1 field spacing must be left (including diagonal fields)
- ships can touch board's edge
- ships must be placed with all their segments within the board
Saving generated data to csv file:
- the generated board setup should be described by a string of 36chars, each representing one field state, starting from top left field. If a field is empty, it becomes "0". If it contains 3-segment ship, it's "3". If 2-segment ship, it's "2". The data for each set should be saved in 1000 lines in a csv file